{% extends 'base.html' %}
{% load static %}

{% block extrahead %}
<link rel="stylesheet" href="{% static 'css/catalogs.css' %}">
{% endblock %}

{% block content %}
<div class="container mt-4">
  
  <!-- Carrusel de Banners -->
  <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-indicators">
      {% for banner in banners %}
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="{{ forloop.counter0 }}" {% if forloop.first %}class="active"{% endif %}></button>
      {% endfor %}
    </div>
    <div class="carousel-inner">
      {% for banner in banners %}
        <div class="carousel-item {% if forloop.first %}active{% endif %}">
          <img src="{{ banner.image.url }}" class="d-block w-100" alt="{{ banner.title }}">
          <div class="carousel-caption d-none d-md-block">
            <h5>{{ banner.title }}</h5>
            <p>{{ banner.description }}</p>
          </div>
        </div>
      {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>

  <!-- CategorÃ­as -->


  <!-- Productos Nuevos -->
  <h2 class="mt-5">Productos Nuevos</h2>
  <div class="row">
    {% for product in new_products %}
      <div class="col-md-3 mb-4">
        <div class="card product-card" data-category="{{ product.category.id }}">
          <img src="{{ product.image.url }}" class="card-img-top" alt="{{ product.name }}">
          <div class="card-body text-center">
            <h5 class="card-title">{{ product.name }}</h5>
            <p class="card-text">Precio: ${{ product.price }}</p>
            <a href="{% url 'catalogs:product_detail' product.idProduct %}" class="btn btn-success">Ver Detalles</a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

  <!-- Productos en Oferta -->
  <h2 class="mt-5">Ofertas Especiales</h2>
  <div class="row">
    {% for offer in offers %}
      <div class="col-md-3 mb-4">
        <div class="card product-card">
          <img src="{{ offer.product.image.url }}" class="card-img-top" alt="{{ offer.product.name }}">
          <div class="card-body text-center">
            <h5 class="card-title">{{ offer.product.name }}</h5>
            <p class="card-text"><del>${{ offer.product.price }}</del> <strong>${{ offer.discounted_price }}</strong></p>
            <a href="{% url 'catalogs:product_detail' offer.product.idProduct %}" class="btn btn-danger">Ver Oferta</a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

</div>

<script src="{% static 'js/catalogs.js' %}"></script>
{% endblock %}